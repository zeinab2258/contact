# API دفترچه تلفن (Contact List)

این پروژه یک API کامل و قدرتمند برای مدیریت دفترچه تلفن است که با استفاده از **Node.js**، **Express** و **MongoDB** ساخته شده است. این پروژه شامل ویژگی‌های پیشرفته‌ای مانند اعتبارسنجی داده، مدیریت خطای متمرکز و قابلیت جستجو می‌باشد.

-----

## ✨ ویژگی‌ها

  * **عملیات CRUD کامل**: ایجاد، خواندن، به‌روزرسانی و حذف مخاطبین.
  * **اعتبارسنجی پیشرفته داده‌ها**: بررسی فرمت صحیح ایمیل، شماره تلفن و استفاده از مقادیر مشخص (enum) برای فیلد نوع ارتباط.
  * **مدیریت خطای متمرکز**: یک میدل‌ور اختصاصی، پاسخ‌های خطا را به صورت یکپارچه و معنادار مدیریت می‌کند.
  * **قابلیت جستجو**: امکان فیلتر کردن مخاطبین بر اساس نام از طریق Query Parameter.
  * **معماری تمیز**: پیروی از یک ساختار ماژولار (Models, Routes, Controllers, Middleware) برای خوانایی و توسعه‌پذیری بهتر.

-----

## ⚙️ نصب و راه‌اندازی

1.  **کلون کردن ریپازیتوری:**

    ```bash
    git clone https://github.com/your-username/contact-api.git
    cd contact-api
    ```

2.  **نصب وابستگی‌ها:**

    ```bash
    npm install
    ```

3.  **ایجاد فایل `.env`:**
    یک فایل با نام `.env` در ریشه پروژه بسازید و متغیرهای محیطی خود را در آن وارد کنید.

    ```env
    PORT=5000
    MONGO_URI=mongodb://localhost:27017/contactlist
    ```

-----

## 🚀 اجرای پروژه

  * **حالت توسعه (با بارگذاری مجدد خودکار):**

    ```bash
    npm run dev
    ```

  * **حالت محصول:**

    ```bash
    npm start
    ```

-----

## 📚 مستندات API

آدرس پایه: `/api/contacts`

### دریافت تمام مخاطبین

  * **متد**: `GET`
  * **آدرس**: `/api/contacts`
  * **توضیحات**: لیستی از تمام مخاطبین را برمی‌گرداند.
  * **پارامترهای جستجو (Query Parameters)**:
      * `name`: مخاطبینی را که نامشان حاوی رشته ارسالی است، فیلتر می‌کند (غیر حساس به حروف بزرگ و کوچک).
      * مثال: `/api/contacts?name=علی`
  * **پاسخ موفقیت**: `200 OK`

### ایجاد یک مخاطب جدید

  * **متد**: `POST`
  * **آدرس**: `/api/contacts`
  * **بدنه درخواست (Request Body)**:
    ```json
    {
      "name": "علی علوی",
      "email": "ali.alavi@example.com",
      "phone": "09123456789",
      "relationship": "همکار"
    }
    ```
  * **پاسخ موفقیت**: `201 Created`

### نمونه پاسخ‌های خطا

  * **خطای اعتبارسنجی** (`400 Bad Request`):
    ```json
    {
      "success": false,
      "error": "لطفا یک ایمیل معتبر وارد کنید, شماره تلفن الزامی است"
    }
    ```
  * **خطای ایمیل تکراری** (`400 Bad Request`):
    ```json
    {
      "success": false,
      "error": "این ایمیل قبلا ثبت شده است"
    }
    ```

### دریافت، به‌روزرسانی و حذف یک مخاطب

  * **دریافت یک مخاطب**: `GET /api/contacts/:id`
  * **به‌روزرسانی یک مخاطب**: `PUT /api/contacts/:id`
  * **حذف یک مخاطب**: `DELETE /api/contacts/:id`